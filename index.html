<!DOCTYPE html>
<html>
<head>
    <title>GT4 European Misano ðŸ‡®ðŸ‡¹</title>
    <!-- Your existing CSS styles here -->
</head>
<body>
    <!-- Your existing HTML structure here -->

    <script>
        async function loadEvents() {
            // Your existing loadEvents function here
        }

        function formatTime(date) {
            // Your existing formatTime function here
        }

        function formatDate(date) {
            // Your existing formatDate function here
        }

        async function populateTables() {
            // Your existing populateTables function here
        }

        function startCountdown() {
            const countdownElement = document.getElementById('countdownTimer');
            const eventNameElement = document.getElementById('eventName');
            const events = await loadEvents();
            let countdownInterval;

            function updateCountdown() {
                const now = new Date();
                const nextEvent = events.find(event => event.start > now);

                if (nextEvent) {
                    const timeLeft = Math.floor((nextEvent.start - now) / 1000); // Time left in seconds
                    const hours = Math.floor(timeLeft / 3600);
                    const minutes = Math.floor((timeLeft % 3600) / 60);
                    const seconds = timeLeft % 60;

                    countdownElement.textContent = `${hours}h ${minutes}m ${seconds}s`;
                    eventNameElement.textContent = nextEvent.name;
                } else {
                    countdownElement.textContent = 'No upcoming events';
                    eventNameElement.textContent = '';
                    clearInterval(countdownInterval);
                }
            }

            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 1000); // Update every second
        }

        window.onload = function() {
            populateTables();
            startCountdown();
        };
    </script>
</body>
</html>
